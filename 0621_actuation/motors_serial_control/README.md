Warning: this code is not exactly the best example in the world.

There's very little error checking, and it could be cleaned up.
That being said, it's good enough for a demo.
